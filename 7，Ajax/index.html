<!DOCTYPE html>
<!-- 演示 Ajax 技术在 HTML 文件中的用法 -->
<html>
    
    <head>
        <meta charset="UTF-8" />
        <title>
            Ajax Testing
        </title>
        
        <!--  
		通过 AJAX，JavaScript 无需等待服务器的响应，而是在等待服务器响应时执行其他脚本，当响应就绪后对响应进行处理。
        -->
        <script>
            function changeInfo() {
            	// 1，XMLHttpRequest 对象用于在后台与服务器交换数据，所有现代浏览器均支持该对象。
                var xmlhttp = new XMLHttpRequest();
                // 2，当请求被发送到服务器时，客户端需要执行一些基于响应的任务。每当 readyState 改变时，就会触发 onreadystatechange 事件（即调用其对应的函数）。
                xmlhttp.onreadystatechange = function() {
                	/*
                	 * 3，处理感兴趣的事件，onreadystatechange 事件会被触发 5 次（0 - 4），对应着 readyState 的每个变化。
                	 * readyState 属性存有 XMLHttpRequest 的状态信息：
                	 * 0: 请求未初始化
                	 * 1: 服务器连接已建立
                	 * 2: 请求已接收
                	 * 3: 请求处理中
                	 * 4: 请求已完成，且响应已就绪
                	 * 
                	 * status 属性有：
                	 * 200: "OK"
                	 * 404: 未找到页面
                	 */
                    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    	// 如需获得来自服务器的响应，可以使用 XMLHttpRequest 对象的 responseText 或 responseXML 属性。
                        document.getElementById("myDiv").innerHTML = xmlhttp.responseText;
                    }
                }
                
                /* 
                 * 4，如需将请求发送到服务器，使用 XMLHttpRequest 对象的 open() 和 send() 方法：
                 * 
                 * open(method,url,async)：规定请求的类型、URL 以及是否异步处理请求。
                 * 							method：请求的类型；GET 或 POST。
                 * 							url：请求对应的URL（本例对应的是一个servlet url）。
                 * 							async：true（异步）或 false（同步）。
                 * 
                 * send(string)：将请求发送到服务器。
                 * 				string：仅用于 POST 请求。
                 */
                xmlhttp.open("GET", "/ajax/change.do", true);
                xmlhttp.send();
            }
        </script>
    </head>
    
    <body>
        <div id="myDiv">
            What's this?
        </div>
        <button name="change" onclick="changeInfo()">
            change it
        </button>
    </body>

</html>